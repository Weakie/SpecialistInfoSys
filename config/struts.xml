<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
	<!-- 开发模式下使用,这样可以打印出更详细的错误信息 -->
	<constant name="struts.devMode" value="true" />
	<!-- 表示struts的action是由spring来生成的 -->
	<constant name="struts.objectFactory" value="org.apache.struts2.spring.StrutsSpringObjectFactory" />
	
	<!-- 该属性指定需要Struts2处理的请求后缀，该属性的默认值是action，即所有匹配*.action的请求都由Struts2处理。 如果用户需要指定多个请求后缀，则多个后缀之间以英文逗号（,）隔开。 -->
	<!-- <constant name="struts.action.extension" value="action" />  -->
	<!-- 设置浏览器是否缓存静态内容,默认值为true(生产环境下使用),开发阶段最好关闭 -->
	<constant name="struts.serve.static.browserCache" value="false" />
	<!-- 当struts的配置文件修改后,系统是否自动重新加载该文件,默认值为false(生产环境下使用),开发阶段最好打开 -->
	<constant name="struts.configuration.xml.reload" value="true" />
	<!-- 默认的视图主题 -->
	<constant name="struts.ui.theme" value="simple" />
	<!-- 解决乱码 -->
	<constant name="struts.i18n.encoding" value="UTF-8" />
	<!-- 指定允许上传的文件最大字节数。默认值是2097152(2M) -->
	<constant name="struts.multipart.maxSize" value="10701096" />
	<!-- 设置上传文件的临时文件夹,默认使用javax.servlet.context.tempdir -->
	<!-- <constant name="struts.multipart.saveDir" value="d:/tmp" /> -->
	<!-- 设置文件上传出错的时候显示信息 -->
	<constant name="struts.custom.i18n.resources" value="com.weakie.action.fileuploadmessage"></constant>
	<package name="basicstruts2" extends="struts-default" namespace="/">
		<action name="index">
			<result>/index.jsp</result>
		</action>

		<action name="usernameConfirm" class="userLoginRegisterAction"
			method="executeUserNameExists">
			<result name="success" type="stream">
				<param name="contentType">text/html</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>

		<action name="register" class="userLoginRegisterAction" method="executeRegister">
			<result name="success">/jsp/login.jsp</result>
			<result name="input">/jsp/register.jsp</result>
		</action>

		<action name="login" class="userLoginRegisterAction" method="executeLogin">
			<result name="success">/jsp/login_redirect.jsp</result>
			<result name="input">/jsp/login.jsp</result>
		</action>

		<!-- 用户上传自己的图片 -->
		<action name="uploadImage" class="specialistInfoImageAction" method="executeUpload">
			<!-- 定义文件上传拦截器 -->
			<interceptor-ref name="fileUpload">
				<!-- 设置文件上传大小 -->
				<param name="maximumSize">4096000</param>
				<!--设置文件上传类型  -->
				<param name="allowedTypes">image/jpeg</param>
			</interceptor-ref>
			<!-- 自定义了拦截器后必手动设置默认的拦截器，否则默认的拦截器不会被执行 -->
			<interceptor-ref name="defaultStack"></interceptor-ref>
			<!-- 用户图片采用ajax的形式上传 -->
			<result name="input">/errortext.jsp</result>
			<result name="success" type="stream">
				<param name="contentType">text/html</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>
		
		<!-- 用户下载自己的图片 -->
		<action name="downloadImage" class="specialistInfoImageAction" method="executeDownload">
			<result name="success" type="stream">
			　　<param name="contentType">image/jpeg</param>
			　　<param name="inputName">inputStream</param>
			　　<param name="bufferSize">1024</param>
			</result>
		</action>
		
		
		<!-- 准备专家更新信息页面 -->
		<action name="specInfoAddPrepare" class="specialistInfoPreCheckAction" method="executeCheck">
			<result name="success" type="chain"> 
				<param name="actionName">specInfoAddPrepareExecute</param> 
				<param name="namespace">/</param> 
			</result>
		</action>
		<action name="specInfoAddPrepareExecute" class="specialistInfoAddPrepareAction" method="executePrepare">
			<result name="success" type="chain"> 
				<param name="actionName">specInfoAddPrepareDirect</param> 
				<param name="namespace">/</param> 
			</result>
		</action>
		<action name="specInfoAddPrepareDirect" class="specialistInfoRedirectAction" method="executeDirect">
			<result name="SPEC">/jsp/spec/specialist_info_update.jsp</result>
			<result name="STAFF">/jsp/staff/specialist_info_update.jsp</result>
		</action>
		
		
		<!-- 更新专家的信息 -->
		<action name="specInfoAdd" class="specialistInfoPreCheckAction" method="executeCheck">
			<result name="success" type="chain"> 
				<param name="actionName">specInfoAddExecute</param> 
				<param name="namespace">/</param> 
			</result>
		</action>
		<action name="specInfoAddExecute" class="specialistInfoAddAction" method="executeAddInfo">
			<result name="success" type="redirectAction">
				<param name="actionName">specInfoDisplay</param>
				<param name="userName">${specInfoBean.userName}</param>
				<param name="applyInfoId">${applyInfoId}</param>
			</result>
		</action>
	
		<!-- 专家显示自己的信息 -->
		<action name="specInfoDisplay" class="specialistInfoPreCheckAction" method="executeCheck">
			<result name="success" type="chain"> 
				<param name="actionName">specInfoDisplayExecute</param> 
				<param name="namespace">/</param> 
			</result>
		</action>
		<action name="specInfoDisplayExecute" class="specialistInfoDisplayAction" method="execute">
			<result name="success" type="chain"> 
				<param name="actionName">specInfoDisplayDirect</param> 
				<param name="namespace">/</param> 
			</result>
		</action>
		<action name="specInfoDisplayDirect" class="specialistInfoRedirectAction" method="executeDirect">
			<result name="SPEC">/jsp/spec/specialist_info_display.jsp</result>
			<result name="STAFF">/jsp/staff/specialist_info_display.jsp</result>
		</action>
		
		<!-- 专家更新信息页面选项的动态更新 -->
		<action name="specInfoAddUpdate" class="specialistInfoAddUpdateAction" method="executeUpdate">
			<result type="stream">
				<param name="contentType">text/html</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>
		
		<!-- 专家提交申请 -->
		<action name="specAddNewApplyPrepare" class="specAddNewApplyAction" method="executePrepare">
			<result name="success">/jsp/spec/specialist_info_add_apply.jsp</result>
		</action>
		<action name="specAddNewApply" class="specAddNewApplyAction" method="execute">
			<result name="success" type="stream">
				<param name="contentType">text/html</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>
		
		<!-- 工作人员 -->
		<action name="staffDisposeApplyShowAll" class="staffDisposeApplyShowAllAction" method="execute">
			<result name="success">/jsp/staff/staff_dispose_apply.jsp</result>
		</action>
		<action name="staffDisposeApplyAccept" class="staffDisposeApplyAcceptAction" method="execute">
			<result name="success" type="stream">
				<param name="contentType">text/html</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>
		<action name="staffDisposeApplyConfirm" class="staffDisposeApplyAction" method="executeConfirm">
			<result name="success" type="stream">
				<param name="contentType">text/html</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>
		
		<!-- 关键字维护 -->
		<action name="selectionInfoAddPrepare" class="selectionInfoAddUpdateAction" method="executePrepare">
			<result name="success">/jsp/staff/staff_dispose_selection.jsp</result>
		</action>
		<action name="selectionInfoAddUpdate" class="selectionInfoAddUpdateAction" method="executeUpdate">
			<result name="success" type="stream">
				<param name="contentType">text/html</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>
	</package>
</struts>